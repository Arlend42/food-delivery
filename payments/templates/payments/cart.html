{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container">

  <div class="d-flex justify-content-between align-items-center">
    <h1>My Shopping Cart</h1>
    <p class="m-0 p-0">
      <button id="btn-checkout" type="button" class="btn btn-primary">
        Checkout
      </button>
    </p>
  </div>
  <hr>
  {% for item in items %}
  <article class="d-flex mb-2 border-bottom">
    <div class="mr-2">
      <img src="{{ item.image_url }}"
        alt="No Image Available"
        width="180"
        height="240">
    </div>
    <div class="flex-grow-1 mx-4">
      <h3>€ {{ item.price }}</h3>
      <p>{{ item.name }}</p>
      <p>Qty. {{ item.quantity }}</p>
    </div>
    <div class="px-2 d-flex flex-column justify-content-center">
      <button type="button" class="btn-close" aria-label="Close"></button>
    </div>
  </article>
  {% empty %}
  <div class="alert alert-warning" role="alert">
    You haven't added anything to your shopping cart!
  </div>
  {% endfor %}

  {% if items %}
  <div>
    <p>Sub-total: € {{ total }}</p>
  </div>
  {% endif %}
</div>
{% endblock content %}

{% block extrascripts %}
<script src="https://js.stripe.com/v3/"></script>
<script>
const configUrl = "{% url 'payments-config' %}";
const checkoutSessionUrl = "{% url 'payments-checkout' %}";
</script>
<script src="{% static 'payments/scripts/cart.js' %}"></script>
{% endblock extrascripts %}